'use strict';

/**
 * Merge `b` into `a`.
 * @api public
 * @method merge
 * @param {Object} a
 * @param {Object} b
 * @return a
 */
exports.merge = function(a, b) {
  for (var key in b) a[key] = b[key];
  return a;
};

/**
 * Description
 * @method stringify
 * @param {} str
 * @return CallExpression
 */
exports.stringify = function(str) {
  return JSON.stringify(str)
             .replace(/\u2028/g, '\\u2028')
             .replace(/\u2029/g, '\\u2029');
};

/**
 * Description
 * @method walkAST
 * @param {} ast
 * @param {} before
 * @param {} after
 * @return 
 */
exports.walkAST = function walkAST(ast, before, after) {
  before && before(ast);
  switch (ast.type) {
    case 'Block':
      ast.nodes.forEach(function (node) {
        walkAST(node, before, after);
      });
      break;
    case 'Case':
    case 'Each':
    case 'Mixin':
    case 'Tag':
    case 'When':
    case 'Code':
      ast.block && walkAST(ast.block, before, after);
      break;
    case 'Attrs':
    case 'BlockComment':
    case 'Comment':
    case 'Doctype':
    case 'Filter':
    case 'Literal':
    case 'MixinBlock':
    case 'Text':
      break;
    default:
      throw new Error('Unexpected node type ' + ast.type);
      break;
  }
  after && after(ast);
};
