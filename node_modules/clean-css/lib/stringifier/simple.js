var all = require('./helpers').all;

/**
 * Description
 * @method store
 * @param {} token
 * @param {} context
 * @return 
 */
function store(token, context) {
  context.output.push(typeof token == 'string' ? token : token[0]);
}

/**
 * Description
 * @method stringify
 * @param {} tokens
 * @param {} options
 * @param {} restoreCallback
 * @return ObjectExpression
 */
function stringify(tokens, options, restoreCallback) {
  var context = {
    keepBreaks: options.keepBreaks,
    output: [],
    spaceAfterClosingBrace: options.compatibility.properties.spaceAfterClosingBrace,
    store: store
  };

  all(tokens, context, false);

  return {
    styles: restoreCallback(context.output.join('')).trim()
  };
}

module.exports = stringify;
